digraph G {

  node [ shape="diamond" ];
  hasAudio [ label="has recorded audio" ];
  overdubActive [ label="overdubbing is on" ];

  node [ shape="box" ];
  recordSyncLogic [ label="Timing Sync Logic" ];
  playSyncLogic [ label="Timing Sync Logic" ];

  node [ shape="oval" ];
  Stopped -> Armed [ label="Record\nAction" ];
  Stopped -> hasAudio [ label="Play\nAction" ];
  hasAudio -> Stopped [ label="no" ];
  hasAudio -> Cued [ label="yes" ];

  Cued -> playSyncLogic;
  playSyncLogic -> Playing;

  Armed -> Stopped [ label="Play\nAction" ];
  Armed -> Recording [ label="On\nPhrase\nSync" ];

  Recording -> Stopped [ label="Play\nAction" ];
  Recording -> recordSyncLogic [ label="Record\nAction" ];
  recordSyncLogic -> Playing;

  Playing -> Stopped [ label="Play\nAction" ];
  Playing -> overdubActive [ label="Record\nAction" ];
  overdubActive -> Armed [ label="no" ];
  overdubActive -> Overdubbing [ label="yes" ];

  Overdubbing -> Stopped [ label="Play\nAction" ];
  Overdubbing -> Playing [ label="Record\nAction" ];

}
